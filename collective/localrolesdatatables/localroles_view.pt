<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="here/main_template/macros/master"
    i18n:domain="collective.googledocsviewer">
<body>

<div metal:fill-slot="main">

<table id="localroles-datatables"
       tal:define="item_role_settings view/role_settings;
                   available_roles view/roles;">
    <thead>
        <tr>
           <th>Title <input type="text" id="title-filtering" name="title-filtering"/></th>
           <th>Type <input type="text" id="type-filtering" name="type-filtering"/></th>
           <th>Name <input type="text" id="name-filtering" name="name-filtering"/></th>
           <th tal:repeat="role available_roles"><span tal:content="role/title">role</span></th>
        </tr>
    </thead>
    <tbody>
      <tal:items tal:repeat="item_url item_role_settings">
        <tal:roles tal:repeat="entry python:item_role_settings[item_url]['localroles']">
          <tal:def tal:define="is_group python:entry['type'] == 'group';
                               disabled entry/disabled | python:False;
                               oddrow repeat/entry/odd;
                               sticky python:entry['id'] in view.STICKY">
           <tr>
            <td><a tal:attributes="href item_url" tal:content="python:item_role_settings[item_url]['title']">link</a></td>
            <td><span tal:content="python:item_role_settings[item_url]['type']">type</span></td>
            <td><span tal:condition="is_group">group - </span><span tal:condition="not:is_group">user - </span><tal:sticky condition="sticky"><span tal:replace="entry/title" /></tal:sticky><tal:nonsticky condition="not:sticky"><span tal:replace="entry/id" /></tal:nonsticky></td>
            <td tal:repeat="role available_roles"><tal:block define="entry_role python:entry['roles'][role['id']]"><span
                tal:condition="python:entry_role == True">1</span><span tal:condition="python:entry_role == False">0</span><span
                tal:condition="python:entry_role == 'global'">global</span><span
                tal:condition="python:entry_role == 'acquired'">acquired</span><span
                tal:condition="disabled">disabled</span></tal:block></td>
           </tr>
          </tal:def>
        </tal:roles>
      </tal:items>
    </tbody>
</table>
<script type="text/javascript" src="++resource++jquery.datatables/extras/TableTools/media/js/ZeroClipboard.js"></script>
<script type="text/javascript" src="++resource++jquery.datatables/extras/TableTools/media/js/TableTools.js"></script>
<script type="text/javascript">
var oTable = $('#localroles-datatables').dataTable({
  "oLanguage": {"sSearch": "Search all columns:"},
  "iDisplayLength": 100,
  "aLengthMenu": [[100, 200, 500, -1],[100, 200, 500, "All"]],
  "sDom": 'T<"clear">lfrtip',
  "oTableTools": {"sSwfPath": "++resource++jquery.datatables/extras/TableTools/media/swf/copy_csv_xls_pdf.swf"}
});
$("#title-filtering").keyup( function () {
  oTable.fnFilter( this.value, 0 );
});
$("#type-filtering").keyup( function () {
  oTable.fnFilter( this.value, 1 );
});
$("#name-filtering").keyup( function () {
  oTable.fnFilter( this.value, 2 );
});
</script>
</div>
</body>
</html>
